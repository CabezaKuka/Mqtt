<!DOCTYPE html>
<html>
<head>
    <title>Enviar Comandos MQTT</title>
</head>
<body>
    <h1>Enviar Comandos MQTT</h1>
    
    <label for="comando">Comando:</label>
    <input type="text" id="comando">
    <button onclick="enviarComando()">Enviar</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js"></script>
    <script>
        var client = new Paho.MQTT.Client("mqtt-dashboard.com", Number(1883), "web_" + parseInt(Math.random() * 100, 10));
        
        client.onConnectionLost = function (responseObject) {
            if (responseObject.errorCode !== 0) {
                console.log("Conexión MQTT perdida: " + responseObject.errorMessage);
            }
        };

        client.connect({
            onSuccess: function () {
                console.log("Conexión MQTT exitosa");
            },
            useSSL: false
        });

        function enviarComando() {
            var comando = document.getElementById("comando").value;
            var message = new Paho.MQTT.Message(comando);
            message.destinationName = "LSGE9YWT/Refresh";
            client.send(message);
            console.log("Comando enviado: " + comando);
        }
    </script>
</body>
</html>
